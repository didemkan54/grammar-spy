<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Grammar Spyâ„¢ â€” Teacher Dashboard</title>
  <link rel="icon" type="image/svg+xml" href="assets/brand/favicon.svg" />
  <style>
    :root{--navy:#0b1020;--mid:#16223a;--teal:#1f5f63;--light:#f2f4f7;--cool:#d9dee6;--slate:#4a5568;--shadow:0 8px 18px rgba(11,16,32,.08)}
    *{box-sizing:border-box}
    body{margin:0;background:var(--light);color:var(--mid);font-family:Inter,Montserrat,Poppins,Outfit,"Segoe UI",sans-serif;padding:0 0 40px;margin:0;display:grid;gap:26px}
    .section{background:#fff;border:1px solid var(--cool);border-radius:18px;box-shadow:var(--shadow);padding:28px}
    .k{margin:0 0 10px;font:800 11px Inter,Arial,sans-serif;letter-spacing:.14em;text-transform:uppercase;color:#1f5f63}
    h1,h2{margin:0;color:#0b1020;line-height:1.12}
    h1{font-size:34px} h2{font-size:20px}
    p{margin:10px 0 0;color:#4a5568;line-height:1.65;font-weight:450}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:14px;margin-top:14px}
    .card{border-radius:12px;background:#f8fbfd;padding:14px;display:grid;gap:8px}
    .segmented{display:inline-flex;gap:6px;padding:4px;border:1px solid var(--cool);border-radius:999px;background:#f8fafc;margin-top:12px}
    .seg{display:inline-flex;align-items:center;justify-content:center;border:0;background:transparent;color:#4a5568;border-radius:999px;padding:7px 11px;font:700 11px Inter,Arial,sans-serif;letter-spacing:.08em;text-transform:uppercase;text-decoration:none}
    .seg.active{background:#ffffff;color:#16223a;box-shadow:0 1px 3px rgba(11,16,32,.08)}
    .btn-primary{display:inline-flex;align-items:center;justify-content:center;min-height:36px;padding:0 13px;border:1px solid #194f53;background:#1f5f63;color:#fff;border-radius:10px;text-decoration:none;text-transform:uppercase;letter-spacing:.08em;font:700 11px Inter,Arial,sans-serif;width:fit-content}
    .btn-secondary{display:inline-flex;align-items:center;justify-content:center;min-height:36px;padding:0 13px;border:1px solid var(--cool);background:#fff;color:#16223a;border-radius:10px;text-decoration:none;text-transform:uppercase;letter-spacing:.08em;font:700 11px Inter,Arial,sans-serif;width:fit-content}
    .link-action{display:inline-block;color:#1f5f63;text-decoration:none;font:700 12px Inter,Arial,sans-serif;letter-spacing:.04em}
    .link-action:hover{text-decoration:underline}
    details{margin-top:14px;border:1px solid var(--cool);border-radius:12px;background:#f8fafc;padding:10px}
    summary{cursor:pointer;font:700 12px Inter,Arial,sans-serif;letter-spacing:.08em;text-transform:uppercase;color:#16223a}
    ul{margin:10px 0 0;padding-left:18px;color:#4a5568;line-height:1.6}
    .pack-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}
    .pack-tile{display:block;text-decoration:none}
    .pack-card-caption{margin-top:6px;font:700 11px Inter,Arial,sans-serif;color:#16223a;line-height:1.25}
    .pack-card img,.pack-tile img{width:100%;max-height:96px;object-fit:cover;border-radius:12px;box-shadow:0 8px 20px rgba(11,16,32,.1);transition:transform .2s ease, box-shadow .2s ease}
    .pack-tile:hover img{transform:translateY(-2px);box-shadow:0 12px 24px rgba(11,16,32,.14)}
    .pack-section-footer{margin-top:12px}
    .icon-sm{width:20px;height:20px;vertical-align:middle;margin-right:6px;object-fit:contain}
    .card h2 .icon-sm{margin-right:8px}
    @media (max-width:100%){.grid{grid-template-columns:1fr}.section{padding:20px}}
    @media (max-width:100%){.pack-grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}}
  </style>
</head>
<body>
  <script src="i18n.js"></script>
  <div data-include="header"></div>
  <main class="wrap">
    <section class="section" style="display:grid;grid-template-columns:1fr auto;gap:24px;align-items:center">
      <div>
      <p class="k">Teacher Dashboard</p>
      <h1>Control panel for your next class mission</h1>
      <p>Continue, start, or report.</p>
      <div class="segmented" role="tablist" aria-label="Mode selection">
        <a class="seg active" aria-selected="true" href="teacher-home.html">Teacher</a>
        <a class="seg" aria-selected="false" href="individual-home.html">Student</a>
      </div>
      </div>
      <img src="assets/illustrations/teacher-dashboard.svg" alt="" style="width:220px;height:auto;opacity:.85" aria-hidden="true" />
    </section>

    <!-- Quick Actions -->
    <section class="section" aria-label="Quick actions">
      <div class="grid" style="grid-template-columns:repeat(4,1fr)">
        <article class="card" style="text-align:center;padding:20px">
          <div style="font-size:28px;margin-bottom:8px">ðŸ“‹</div>
          <h2 style="font-size:16px;margin:0 0 4px">Launch Mission</h2>
          <p style="font-size:13px;margin:0 0 10px">Start a new class mission</p>
          <a class="btn-primary" href="teacher-mode.html?pack=pack01" style="font-size:12px;padding:8px 14px">Launch</a>
        </article>
        <article class="card" style="text-align:center;padding:20px">
          <div style="font-size:28px;margin-bottom:8px">ðŸ‘¥</div>
          <h2 style="font-size:16px;margin:0 0 4px">My Classrooms</h2>
          <p style="font-size:13px;margin:0 0 10px">Manage students & codes</p>
          <a class="btn-primary" href="classrooms.html" style="font-size:12px;padding:8px 14px">Open</a>
        </article>
        <article class="card" style="text-align:center;padding:20px">
          <div style="font-size:28px;margin-bottom:8px">ðŸ“Š</div>
          <h2 style="font-size:16px;margin:0 0 4px">Reports</h2>
          <p style="font-size:13px;margin:0 0 10px">View student progress</p>
          <a class="btn-primary" href="teacher-student-progress.html" style="font-size:12px;padding:8px 14px">View</a>
        </article>
        <article class="card" style="text-align:center;padding:20px">
          <div style="font-size:28px;margin-bottom:8px">ðŸ“š</div>
          <h2 style="font-size:16px;margin:0 0 4px">Mission Library</h2>
          <p style="font-size:13px;margin:0 0 10px">Browse all missions</p>
          <a class="btn-primary" href="packs.html" style="font-size:12px;padding:8px 14px">Browse</a>
        </article>
      </div>
    </section>

    <!-- My Students Overview -->
    <section class="section" aria-label="Student overview">
      <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin-bottom:16px">
        <div>
          <p class="k">My Students</p>
          <h2 style="margin:0">Student Overview</h2>
        </div>
        <a class="btn-primary" href="classrooms.html" style="font-size:12px;padding:8px 16px">+ Add Classroom</a>
      </div>
      <div id="studentOverview"></div>
    </section>

    <!-- Mission Selection -->
    <section class="section" aria-label="Pack tiles">
      <p class="k">Missions</p>
      <h2>Quick launch a mission</h2>
      <p>Open one mission set, then choose difficulty.</p>
      <div class="pack-grid" style="margin-top:14px" id="featuredPacks"></div>
      <p class="pack-section-footer"><a href="packs.html" class="link-action">View all missions â†’</a></p>
    </section>

    <!-- Resources -->
    <section class="section" aria-label="Resources">
      <p class="k">Resources</p>
      <div class="grid" style="grid-template-columns:1fr 1fr">
        <article class="card">
          <h2>Teacher Welcome Video</h2>
          <p>3-minute tour of the full teacher flow.</p>
          <a class="btn-primary" href="teacher-welcome.html" style="margin-top:8px;display:inline-flex">Watch Video</a>
        </article>
        <article class="card">
          <h2>ELD Teaching Tips</h2>
          <p>Short reads with actionable next steps.</p>
          <a class="link-action" href="insights.html">Read Insights â†’</a>
        </article>
      </div>
    </section>
  </main>
  <div data-include="footer"></div>
  <script src="billing-scaffold.js"></script>
  <script src="auth-scaffold.js"></script>
  <script src="classroom.js"></script>
  <script src="layout-loader.js"></script>
  <script src="app-shell.js"></script>
  <script>
    (function(){
      // Student overview
      function renderStudentOverview() {
        var el = document.getElementById('studentOverview');
        if (!el || !window.GSClassroom) return;
        var classrooms = window.GSClassroom.getClassrooms();
        if (!classrooms.length) {
          el.innerHTML = '<div style="text-align:center;padding:32px;background:#f8fafc;border-radius:14px;border:1px solid #e4e8ef">' +
            '<div style="font-size:36px;margin-bottom:10px">ðŸ‘¥</div>' +
            '<h3 style="margin:0 0 6px;font-size:18px;color:#16223a">No classrooms yet</h3>' +
            '<p style="margin:0 0 14px;color:#7a8698;font-size:14px">Create a classroom and share the join code with your students.</p>' +
            '<a href="classrooms.html" style="display:inline-flex;align-items:center;padding:10px 18px;border:1px solid #194f53;border-radius:10px;background:#1f5f63;color:#fff;font:700 13px Inter,sans-serif;text-transform:uppercase;letter-spacing:.06em;text-decoration:none">Create Classroom</a>' +
            '</div>';
          return;
        }
        var html = '';
        classrooms.forEach(function(c) {
          var studentCount = c.students ? c.students.length : 0;
          var studentRows = '';
          if (studentCount) {
            studentRows = (c.students || []).map(function(s) {
              var d = '';
              try { d = new Date(s.joinedAt).toLocaleDateString('en-US', {month:'short',day:'numeric'}); } catch(e){}
              return '<div style="display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#fff;border:1px solid #e4e8ef;border-radius:8px">' +
                '<div style="display:flex;align-items:center;gap:10px">' +
                  '<div style="width:32px;height:32px;border-radius:50%;background:#e8f4f5;color:#1f5f63;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:13px">' + (s.name.charAt(0).toUpperCase()) + '</div>' +
                  '<div><div style="font-weight:600;font-size:14px;color:#16223a">' + s.name + '</div>' +
                  '<div style="font-size:11px;color:#7a8698">Joined ' + d + '</div></div>' +
                '</div>' +
                '<a href="teacher-student-progress.html" style="font-size:12px;color:#1f5f63;font-weight:700;text-decoration:none;text-transform:uppercase;letter-spacing:.06em">View Report â†’</a>' +
              '</div>';
            }).join('');
          } else {
            studentRows = '<div style="padding:14px;text-align:center;color:#7a8698;font-size:13px;font-style:italic">No students yet â€” share code <strong>' + c.code + '</strong></div>';
          }
          html += '<div style="background:#fff;border:1px solid #d9dee6;border-radius:14px;padding:18px;margin-bottom:14px;box-shadow:0 2px 8px rgba(11,16,32,.04)">' +
            '<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">' +
              '<div><h3 style="margin:0;font-size:18px;color:#0b1020">' + c.name + '</h3>' +
              '<span style="font-size:12px;color:#7a8698">' + studentCount + ' student' + (studentCount !== 1 ? 's' : '') + ' Â· Code: <strong style="color:#1f5f63;letter-spacing:.1em">' + c.code + '</strong></span></div>' +
              '<a href="classrooms.html" style="font-size:11px;color:#1f5f63;font-weight:700;text-decoration:none;text-transform:uppercase;letter-spacing:.06em;border:1px solid #d9dee6;border-radius:8px;padding:6px 12px">Manage</a>' +
            '</div>' +
            '<div style="display:grid;gap:6px">' + studentRows + '</div>' +
          '</div>';
        });
        el.innerHTML = html;
      }
      renderStudentOverview();
      var FEATURED = [
        { id: 'pack01', num: '01', name: 'Retell What Happened', cover: 'assets/branding-images/packs/pack01-retell-what-happened.png' },
        { id: 'pack02', num: '02', name: 'Speak In The Moment', cover: 'assets/branding-images/packs/pack02-speak-in-the-moment.png' },
        { id: 'pack03', num: '03', name: 'Sentence Confidence Missions', cover: 'assets/branding-images/packs/pack03-sentence-confidence-missions.png' },
        { id: 'pack04', num: '04', name: 'Link Ideas Clearly', cover: 'assets/branding-images/packs/pack04-link-ideas-clearly.png' }
      ];
      var el = document.getElementById('featuredPacks');
      if (!el) return;
      FEATURED.forEach(function(p){
        var a = document.createElement('a');
        a.href = 'pack.html?pack=' + p.id;
        a.className = 'pack-tile';
        a.innerHTML = '<img src="' + p.cover + '" alt="Pack ' + p.num + ' ' + p.name + ' cover">' +
          '<div class="pack-card-caption">Pack ' + p.num + ' Â· ' + p.name + '</div>';
        el.appendChild(a);
      });
    })();
  </script>
</body>
</html>
