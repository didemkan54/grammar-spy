<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Grammar Spy™ — Mission Sequence Lab</title>
  <link rel="icon" type="image/svg+xml" href="assets/brand/favicon.svg?v=20260225b" />
  <style>
    :root{--navy:#0b1020;--mid:#16223a;--teal:#1f5f63;--light:#f2f4f7;--line:#d9dee6;--slate:#4a5568;--ok:#1f8f63;--bad:#b04444;--shadow:0 10px 20px rgba(11,16,32,.08)}
    *{box-sizing:border-box}
    body{margin:0;background:var(--light);color:var(--mid);font-family:Inter,Montserrat,Poppins,Outfit,"Segoe UI",sans-serif;padding:22px 14px 34px}
    .wrap{max-width:1040px;margin:0 auto;display:grid;gap:16px}
    .panel{background:#fff;border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow)}
    .head{padding:18px;display:grid;gap:8px}
    .k{margin:0;font:800 11px Inter,Arial,sans-serif;letter-spacing:.14em;text-transform:uppercase;color:var(--teal)}
    h1{margin:0;font-size:32px;line-height:1.08;color:var(--navy)}
    .sub{margin:0;color:var(--slate);line-height:1.55}
    .hud{padding:0 18px 18px;display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px}
    .chip{border:1px solid var(--line);border-radius:10px;background:#f8fafc;padding:9px 10px;display:grid;gap:2px}
    .chip b{font-size:12px;letter-spacing:.08em;text-transform:uppercase;color:var(--slate)}
    .chip span{font-weight:800;color:var(--mid)}
    .play{padding:0 18px 18px;display:grid;gap:12px}
    .scene{border:1px solid var(--line);border-radius:14px;background:#fbfdff;padding:12px;display:grid;gap:8px}
    .scene .label{font-size:12px;color:var(--teal);letter-spacing:.08em;font-weight:800;text-transform:uppercase;margin:0}
    .scene .line{font-size:14px;color:var(--slate);line-height:1.55;margin:0}
    .prompt{font-size:18px;font-weight:800;color:var(--navy);margin:0}
    .opts{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .opt{border:1px solid var(--line);border-radius:12px;background:#fff;padding:11px;text-align:left;cursor:pointer;display:grid;gap:4px;transition:transform .14s ease,border-color .14s ease,box-shadow .14s ease}
    .opt:hover{transform:translateY(-1px);border-color:#c9a227;box-shadow:0 8px 14px rgba(11,16,32,.09)}
    .opt b{font-size:12px;letter-spacing:.1em;text-transform:uppercase;color:var(--teal)}
    .opt span{font-size:14px;color:var(--mid);line-height:1.35}
    .opt.good{border-color:#4fb28c;background:#f2fbf7}
    .opt.bad{border-color:#d47f7f;background:#fff7f7}
    .feedback{min-height:24px;font-weight:700;margin:0}
    .ok{color:var(--ok)}
    .bad{color:var(--bad)}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;justify-content:center;text-decoration:none;border:1px solid var(--line);border-radius:10px;padding:11px 14px;background:#fff;color:var(--mid);text-transform:uppercase;letter-spacing:.08em;font-size:12px;font-weight:700;cursor:pointer}
    .btn.primary{background:var(--teal);border-color:#194f53;color:#fff}
    .overlay{position:fixed;inset:0;background:rgba(11,16,32,.38);display:none;place-items:center;padding:14px;z-index:140}
    .overlay.show{display:grid}
    .modal{width:min(680px,100%);background:#fff;border:1px solid var(--line);border-radius:16px;box-shadow:0 20px 34px rgba(11,16,32,.22);padding:16px;display:grid;gap:10px}
    .modal h2{margin:0;font-size:28px;color:var(--navy);line-height:1.1}
    .lineout{margin:0;color:var(--slate);line-height:1.6}
    @media (max-width:900px){.hud{grid-template-columns:1fr 1fr}.opts{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <script src="i18n.js"></script>
  <div data-include="header"></div>

  <main class="wrap" id="main">
    <section class="panel">
      <div class="head">
        <p class="k" id="gameK">Pack · Difficulty</p>
        <h1 id="gameTitle">Mission Sequence Lab</h1>
        <p class="sub" id="gameSub">Loading game details...</p>
      </div>

      <div class="hud">
        <div class="chip"><b>Round</b><span id="hudCase">1/1</span></div>
        <div class="chip"><b>Accuracy</b><span id="hudAcc">0%</span></div>
        <div class="chip"><b>Streak</b><span id="hudStreak">0</span></div>
        <div class="chip"><b>Timer</b><span id="hudTimer">--</span></div>
      </div>

      <div class="play">
        <div class="scene">
          <p class="label">Scene file</p>
          <p class="line" id="scene">Loading scene...</p>
          <p class="prompt" id="prompt">Loading prompt...</p>
        </div>

        <div class="opts" id="options"></div>
        <p class="feedback" id="feedback"></p>

        <div class="row">
          <button class="btn" id="endBtn" type="button">End Mission</button>
          <button class="btn" id="btnSound" type="button">Sound: ON</button>
          <a class="btn" id="btnTeacher" href="teacher-mode.html">Teacher Mode</a>
          <a class="btn" id="btnHome" href="index.html">Home</a>
        </div>
      </div>
    </section>
  </main>

  <div class="overlay show" id="startOverlay" role="dialog" aria-modal="true" aria-labelledby="howToTitle">
    <section class="modal">
      <h2 id="howToTitle">How to play</h2>
      <p class="lineout" id="howToText">Read each clue and choose the strongest answer.</p>
      <div class="row">
        <button class="btn primary" id="startBtn" type="button">Start Game</button>
      </div>
    </section>
  </div>

  <div class="overlay" id="reportOverlay" role="dialog" aria-modal="true">
    <section class="modal">
      <h2>Mission Report</h2>
      <p class="lineout" id="reportAcc"></p>
      <p class="lineout" id="reportPlan"></p>
      <p class="lineout" id="reportPack"></p>
      <div class="row">
        <button class="btn primary" id="replayBtn" type="button">Play Again</button>
        <a class="btn" href="teacher-mode.html" id="closeToTeacher">Teacher Mode</a>
      </div>
    </section>
  </div>

  <div data-include="footer"></div>
  <script src="billing-scaffold.js"></script>
  <script src="auth-scaffold.js"></script>
  <script src="layout-loader.js?v=20260225b"></script>
  <script src="app-shell.js"></script>
  <script src="game-sound.js"></script>
  <script src="grammar-context-bank.js"></script>
  <script>window.GS_GAME_KEY = "mission-sequence-lab";</script>
  <script src="mission-game-shell.js"></script>
</body>
</html>
